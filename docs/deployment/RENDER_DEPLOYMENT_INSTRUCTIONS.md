# Render Deployment Instructions for WFED119 LifeCraft Bot

**Last Updated:** September 9, 2025

## 🚀 Quick Deployment Steps

### 1. Create Render Account
- Go to https://render.com
- Sign up with GitHub for easier integration

### 2. Connect GitHub Repository
- Click "New +" → "Blueprint"
- Connect your GitHub account if not already connected
- Select repository: `HosungYou/wfed119`
- Render will automatically detect the `render.yaml` file

### 3. Configure Environment Variables
In the Render dashboard, add these environment variables:

```
ANTHROPIC_API_KEY=your_anthropic_api_key_here
OPENAI_API_KEY=your_openai_api_key_here
```

**Note**: Get your API keys from:
- Anthropic: https://console.anthropic.com/account/keys
- OpenAI: https://platform.openai.com/api-keys

⚠️ **Security**: Never commit actual API keys to Git. Always use environment variables.

### 4. Deploy
- Click "Apply" to create resources
- Render will:
  - Create a PostgreSQL database
  - Build the Next.js application
  - Deploy the web service
  - Set up automatic deployments from GitHub

### 5. Wait for Deployment
- Initial deployment takes 10-15 minutes
- Check build logs for any errors
- Once deployed, visit your app URL

## 📋 Post-Deployment Checklist

- [ ] Test the health endpoint: `https://your-app.onrender.com/api/health`
- [ ] Verify database connection in logs
- [ ] Test the chat interface
- [ ] Check API key functionality

## 🔧 Deployment Configuration

### Current Setup (from render.yaml):
- **Database**: PostgreSQL (starter plan)
- **Web Service**: Node.js runtime
- **Root Directory**: `lifecraft-bot`
- **Build Command**: `npm ci && npm run build:render`
- **Start Command**: `npm start`
- **Auto Deploy**: Enabled for main branch
- **Health Check**: `/api/health`

### Manual Setup (if not using Blueprint):
If the Blueprint doesn't work, manually configure:
1. **Root Directory**: Set to `lifecraft-bot` 
2. **Build Command**: `npm ci && npm run build:render`
3. **Start Command**: `npm start`
4. **Node Version**: 18 or higher

### Important Notes:
- The app is configured to work with `/lifecraft-bot` as the root directory
- Database migrations run automatically during build
- Session secret is auto-generated by Render

## 🐛 Troubleshooting

### Build Failures
If the build fails:
1. Check if the build command runs locally: `npm run build:render`
2. Verify all dependencies are in package.json
3. Check for TypeScript errors

### Database Connection Issues
1. Verify DATABASE_URL is set correctly
2. Check if migrations ran successfully
3. Look for connection errors in logs

### API Key Issues
1. Ensure API keys are valid
2. Check environment variable names match exactly
3. Verify keys have necessary permissions

## 🔐 Security Notes

⚠️ **IMPORTANT**: The API keys provided should be rotated after deployment:
1. Generate new keys from Anthropic and OpenAI dashboards
2. Update them in Render environment variables
3. Never commit API keys to Git

## 📊 Monitoring

### Available Metrics in Render Dashboard:
- Request count and response times
- Memory and CPU usage
- Database connections
- Error rates

### Logs
- Access logs through Render dashboard
- Filter by service (web, database)
- Use log search for debugging

## 🔄 Updating the Deployment

### Automatic Updates
- Any push to `main` branch triggers auto-deployment
- Takes 5-10 minutes typically

### Manual Updates
1. Go to Render dashboard
2. Click on your service
3. Click "Manual Deploy" → "Deploy latest commit"

### Database Migrations
- Run automatically with `npm run build:render`
- Check migration status in build logs

## 📞 Support

### Render Support
- Documentation: https://render.com/docs
- Community: https://community.render.com
- Status: https://status.render.com

### Project Support
- GitHub Issues: https://github.com/HosungYou/wfed119/issues
- Team Slack: #wfed119-dev

## 🎉 Success!

Once deployed, your app will be available at:
```
https://lifecraft-bot-xxxx.onrender.com
```

The database will be accessible through the DATABASE_URL environment variable automatically set by Render.

---

**Note**: Free tier services on Render may spin down after 15 minutes of inactivity. The first request after inactivity may take 30-60 seconds to respond.