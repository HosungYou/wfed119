@tailwind base;
@tailwind components;
@tailwind utilities;

/* =============================================================================
 * Terra Editorial Design System
 * Warm Earth Tones + Magazine Typography
 * ============================================================================= */

/* -----------------------------------------------------------------------------
 * CSS Custom Properties
 * ----------------------------------------------------------------------------- */
:root {
  /* Core colors */
  --background: #fdfbf7;
  --foreground: #1a1918;

  /* Primary palette: Terracotta */
  --primary-50: #fef7f4;
  --primary-100: #fdeee8;
  --primary-200: #fad8ca;
  --primary-300: #f5b89d;
  --primary-400: #ed8f6a;
  --primary-500: #e26b42;
  --primary-600: #d04f2a;
  --primary-700: #ae3d22;

  /* Secondary palette: Olive */
  --secondary-50: #f8f9f4;
  --secondary-500: #889c5c;
  --secondary-600: #6b7e47;
  --secondary-700: #536239;

  /* Accent palette: Sand */
  --accent-100: #faf8f3;
  --accent-200: #f4efe4;
  --accent-300: #ebe2d0;
  --accent-400: #ddd0b5;
  --accent-500: #cbba96;

  /* Neutral palette: Charcoal */
  --neutral-100: #e5e4e2;
  --neutral-200: #cbc9c5;
  --neutral-300: #a9a6a0;
  --neutral-400: #89857d;
  --neutral-500: #6e6a62;
  --neutral-600: #57544d;
  --neutral-700: #474440;
  --neutral-800: #3b3936;
  --neutral-900: #33312f;
  --neutral-950: #1a1918;

  /* Surface colors */
  --surface-cream: #fdfbf7;
  --surface-warm: #f9f6f1;
  --surface-muted: #f3efe8;
  --surface-paper: #fffef9;

  /* Semantic */
  --success: #5a9a4a;
  --warning: #d4870f;
  --error: #c53030;
  --info: #2b6cb0;

  /* Shadows (warm-tinted) */
  --shadow-color: 26 25 24;
}

/* -----------------------------------------------------------------------------
 * Base Styles
 * ----------------------------------------------------------------------------- */
html,
body {
  max-width: 100vw;
  overflow-x: hidden;
  margin: 0;
  padding: 0;
}

* {
  box-sizing: border-box;
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: var(--font-ibm-plex), var(--font-space-grotesk), -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Typography base */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-space-grotesk), system-ui, sans-serif;
  font-weight: 600;
  letter-spacing: -0.02em;
  color: var(--neutral-950);
}

/* Strong contrast for headlines */
h1 {
  font-weight: 700;
  letter-spacing: -0.03em;
}

h2 {
  letter-spacing: -0.025em;
}

/* Links */
a {
  color: var(--primary-600);
  text-decoration: none;
  transition: color 0.2s ease;
}

a:hover {
  color: var(--primary-700);
}

/* Focus states */
:focus-visible {
  outline: 2px solid var(--primary-500);
  outline-offset: 2px;
}

/* Selection */
::selection {
  background: var(--primary-200);
  color: var(--neutral-950);
}

/* -----------------------------------------------------------------------------
 * Custom Scrollbar
 * ----------------------------------------------------------------------------- */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: var(--surface-muted);
}

::-webkit-scrollbar-thumb {
  background: var(--neutral-300);
  border-radius: 5px;
  border: 2px solid var(--surface-muted);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--neutral-400);
}

/* Firefox scrollbar */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--neutral-300) var(--surface-muted);
}

/* -----------------------------------------------------------------------------
 * Buttons
 * ----------------------------------------------------------------------------- */
button {
  cursor: pointer;
  font-family: inherit;
}

button:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

/* Primary Button */
.btn-primary {
  @apply px-6 py-3 bg-primary-600 text-white rounded-lg font-medium;
  @apply hover:bg-primary-700 active:bg-primary-800;
  @apply transition-all duration-200 ease-out-expo;
  @apply shadow-soft hover:shadow-medium;
  @apply focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2;
}

/* Secondary Button */
.btn-secondary {
  @apply px-6 py-3 bg-surface-warm border border-neutral-200 text-neutral-800 rounded-lg font-medium;
  @apply hover:bg-surface-muted hover:border-neutral-300;
  @apply transition-all duration-200 ease-out-expo;
  @apply focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2;
}

/* Ghost Button */
.btn-ghost {
  @apply px-4 py-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg;
  @apply transition-all duration-200 ease-out-expo;
}

/* Accent Button */
.btn-accent {
  @apply px-6 py-3 bg-secondary-600 text-white rounded-lg font-medium;
  @apply hover:bg-secondary-700 active:bg-secondary-800;
  @apply transition-all duration-200 ease-out-expo;
  @apply shadow-soft hover:shadow-medium;
}

/* Icon Button */
.btn-icon {
  @apply p-2 rounded-lg text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100;
  @apply transition-all duration-200 ease-out-expo;
}

/* -----------------------------------------------------------------------------
 * Cards
 * ----------------------------------------------------------------------------- */
.card {
  @apply bg-surface-paper rounded-xl border border-neutral-100;
  box-shadow: 0 2px 8px rgba(var(--shadow-color) / 0.04);
}

.card-elevated {
  @apply bg-surface-paper rounded-xl;
  box-shadow:
    0 4px 16px rgba(var(--shadow-color) / 0.06),
    0 2px 4px rgba(var(--shadow-color) / 0.04);
}

.card-interactive {
  @apply bg-surface-paper rounded-xl border border-neutral-100;
  @apply transition-all duration-300 ease-out-expo;
  box-shadow: 0 2px 8px rgba(var(--shadow-color) / 0.04);
}

.card-interactive:hover {
  @apply border-neutral-200;
  box-shadow:
    0 8px 32px rgba(var(--shadow-color) / 0.08),
    0 4px 8px rgba(var(--shadow-color) / 0.04);
  transform: translateY(-2px);
}

/* Glass Card (warm tint) */
.glass-card {
  background: rgba(253, 251, 247, 0.85);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(229, 228, 226, 0.5);
  border-radius: 16px;
  box-shadow: 0 4px 24px rgba(var(--shadow-color) / 0.06);
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.glass-card:hover {
  background: rgba(253, 251, 247, 0.95);
  transform: translateY(-2px);
  box-shadow: 0 8px 32px rgba(var(--shadow-color) / 0.1);
}

/* Glass Panel */
.glass-panel {
  background: rgba(253, 251, 247, 0.8);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(229, 228, 226, 0.4);
  box-shadow: 0 4px 30px rgba(var(--shadow-color) / 0.05);
}

/* -----------------------------------------------------------------------------
 * Typography Classes
 * ----------------------------------------------------------------------------- */
/* Display Headlines - Editorial style */
.heading-display {
  @apply font-display text-display-xl text-neutral-950;
  letter-spacing: -0.03em;
  line-height: 0.95;
}

.heading-1 {
  @apply font-display text-4xl lg:text-5xl font-bold text-neutral-950;
  letter-spacing: -0.025em;
}

.heading-2 {
  @apply font-display text-2xl lg:text-3xl font-semibold text-neutral-900;
  letter-spacing: -0.02em;
}

.heading-3 {
  @apply font-display text-xl font-semibold text-neutral-800;
  letter-spacing: -0.015em;
}

.heading-4 {
  @apply font-display text-lg font-medium text-neutral-800;
}

/* Body Text */
.body-large {
  @apply text-lg text-neutral-700 leading-relaxed;
}

.body-base {
  @apply text-base text-neutral-600 leading-relaxed;
}

.body-small {
  @apply text-sm text-neutral-500;
}

/* Labels & Captions */
.label {
  @apply text-label uppercase text-neutral-500 tracking-wider;
}

.caption {
  @apply text-caption text-neutral-400;
}

/* Muted text */
.text-muted {
  @apply text-sm text-neutral-400;
}

/* Editorial accents */
.text-editorial {
  font-family: var(--font-space-grotesk);
  font-weight: 500;
  letter-spacing: -0.01em;
}

/* -----------------------------------------------------------------------------
 * Badges
 * ----------------------------------------------------------------------------- */
.badge {
  @apply inline-flex items-center gap-1.5 px-3 py-1 text-xs font-medium rounded-full;
  @apply transition-all duration-200;
}

.badge-completed {
  @apply badge bg-secondary-100 text-secondary-700 border border-secondary-200;
}

.badge-in-progress {
  @apply badge bg-primary-100 text-primary-700 border border-primary-200;
}

.badge-locked {
  @apply badge bg-neutral-100 text-neutral-500 border border-neutral-200;
}

.badge-info {
  @apply badge bg-info-light text-info border border-info/20;
}

/* -----------------------------------------------------------------------------
 * Form Elements
 * ----------------------------------------------------------------------------- */
.input {
  @apply w-full px-4 py-3 bg-surface-paper border border-neutral-200 rounded-lg;
  @apply text-neutral-900 placeholder-neutral-400;
  @apply transition-all duration-200 ease-out-expo;
  @apply focus:border-primary-500 focus:ring-2 focus:ring-primary-100;
}

.input:hover:not(:focus) {
  @apply border-neutral-300;
}

.textarea {
  @apply input resize-none;
  min-height: 120px;
}

.select {
  @apply input appearance-none cursor-pointer;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2389857d' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 16px;
  padding-right: 40px;
}

/* Checkbox */
.checkbox {
  @apply w-5 h-5 rounded border-2 border-neutral-300 text-primary-600;
  @apply transition-all duration-200;
  @apply focus:ring-2 focus:ring-primary-100 focus:ring-offset-0;
}

.checkbox:checked {
  @apply bg-primary-600 border-primary-600;
}

/* -----------------------------------------------------------------------------
 * Progress Indicators
 * ----------------------------------------------------------------------------- */
.progress-bar {
  @apply h-2 bg-neutral-100 rounded-full overflow-hidden;
}

.progress-bar-fill {
  @apply h-full bg-gradient-to-r from-primary-500 to-primary-400 rounded-full;
  @apply transition-all duration-500 ease-out-expo;
}

.progress-steps {
  @apply flex items-center gap-2;
}

.progress-step {
  @apply w-3 h-3 rounded-full bg-neutral-200;
  @apply transition-all duration-300;
}

.progress-step.active {
  @apply bg-primary-500 scale-125;
}

.progress-step.completed {
  @apply bg-secondary-500;
}

/* -----------------------------------------------------------------------------
 * Module Cards (Journey Overview)
 * ----------------------------------------------------------------------------- */
.module-card {
  @apply relative p-6 rounded-2xl border border-neutral-100 bg-surface-paper;
  @apply transition-all duration-300 ease-out-expo;
  box-shadow: 0 2px 8px rgba(var(--shadow-color) / 0.04);
}

.module-card:hover {
  @apply border-neutral-200;
  box-shadow: 0 12px 40px rgba(var(--shadow-color) / 0.1);
  transform: translateY(-4px);
}

.module-card.locked {
  @apply opacity-60 cursor-not-allowed;
}

.module-card.locked:hover {
  transform: none;
  box-shadow: 0 2px 8px rgba(var(--shadow-color) / 0.04);
}

.module-card.active {
  @apply border-primary-300 bg-primary-50/50;
  box-shadow:
    0 12px 40px rgba(var(--shadow-color) / 0.08),
    0 0 0 1px var(--primary-200);
}

.module-card.completed {
  @apply border-secondary-200 bg-secondary-50/30;
}

/* Module Icon */
.module-icon {
  @apply w-14 h-14 rounded-xl flex items-center justify-center;
  @apply bg-gradient-to-br from-primary-100 to-primary-50;
  @apply text-primary-600;
}

.module-card.completed .module-icon {
  @apply from-secondary-100 to-secondary-50 text-secondary-600;
}

/* -----------------------------------------------------------------------------
 * Navigation
 * ----------------------------------------------------------------------------- */
.nav-link {
  @apply relative px-4 py-2 text-neutral-600 font-medium rounded-lg;
  @apply transition-all duration-200 ease-out-expo;
}

.nav-link:hover {
  @apply text-neutral-900 bg-neutral-50;
}

.nav-link.active {
  @apply text-primary-700 bg-primary-50;
}

.nav-link.active::after {
  content: '';
  @apply absolute bottom-0 left-4 right-4 h-0.5 bg-primary-500 rounded-full;
}

/* -----------------------------------------------------------------------------
 * Sidebar
 * ----------------------------------------------------------------------------- */
.sidebar {
  @apply w-72 h-screen fixed left-0 top-0 bg-surface-cream border-r border-neutral-100;
  @apply flex flex-col;
}

.sidebar-nav-item {
  @apply flex items-center gap-3 px-4 py-3 mx-3 rounded-lg;
  @apply text-neutral-600 font-medium;
  @apply transition-all duration-200 ease-out-expo;
}

.sidebar-nav-item:hover {
  @apply bg-neutral-50 text-neutral-900;
}

.sidebar-nav-item.active {
  @apply bg-primary-50 text-primary-700;
}

/* -----------------------------------------------------------------------------
 * Chat Interface
 * ----------------------------------------------------------------------------- */
.chat-container {
  @apply flex flex-col h-full bg-surface-cream;
}

.chat-messages {
  @apply flex-1 overflow-y-auto p-6 space-y-4;
}

.chat-message {
  @apply max-w-[85%] p-4 rounded-2xl;
  @apply animate-fade-up;
}

.chat-message.user {
  @apply ml-auto bg-primary-600 text-white;
  border-radius: 20px 20px 4px 20px;
}

.chat-message.assistant {
  @apply mr-auto bg-surface-paper border border-neutral-100;
  border-radius: 20px 20px 20px 4px;
  box-shadow: 0 2px 8px rgba(var(--shadow-color) / 0.04);
}

.chat-input-container {
  @apply p-4 border-t border-neutral-100 bg-surface-paper;
}

.chat-input {
  @apply w-full px-5 py-4 bg-surface-warm border border-neutral-200 rounded-2xl;
  @apply text-neutral-900 placeholder-neutral-400;
  @apply transition-all duration-200 ease-out-expo;
  @apply focus:border-primary-400 focus:ring-2 focus:ring-primary-100;
  resize: none;
}

.chat-send-btn {
  @apply absolute right-3 top-1/2 -translate-y-1/2;
  @apply p-2.5 bg-primary-600 text-white rounded-xl;
  @apply hover:bg-primary-700 active:scale-95;
  @apply transition-all duration-200;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
}

/* Typing indicator */
.typing-indicator {
  @apply flex items-center gap-1 p-4;
}

.typing-dot {
  @apply w-2 h-2 bg-neutral-400 rounded-full;
  animation: typing-bounce 1.4s infinite ease-in-out;
}

.typing-dot:nth-child(1) { animation-delay: 0s; }
.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes typing-bounce {
  0%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-6px); }
}

/* -----------------------------------------------------------------------------
 * Dashboard Components
 * ----------------------------------------------------------------------------- */
.dashboard-grid {
  @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6;
}

.stat-card {
  @apply p-6 bg-surface-paper rounded-2xl border border-neutral-100;
  box-shadow: 0 2px 8px rgba(var(--shadow-color) / 0.04);
}

.stat-value {
  @apply text-4xl font-bold text-neutral-950;
  font-family: var(--font-space-grotesk);
  letter-spacing: -0.02em;
}

.stat-label {
  @apply text-sm text-neutral-500 mt-1;
}

/* Profile Card */
.profile-card {
  @apply p-8 bg-surface-paper rounded-2xl border border-neutral-100;
  box-shadow: 0 4px 16px rgba(var(--shadow-color) / 0.06);
}

/* Journey Map */
.journey-map {
  @apply relative p-8 bg-surface-warm rounded-2xl border border-neutral-100;
}

.journey-step {
  @apply relative flex items-center gap-4 py-4;
}

.journey-step::before {
  content: '';
  @apply absolute left-5 top-full w-0.5 h-4 bg-neutral-200;
}

.journey-step:last-child::before {
  @apply hidden;
}

.journey-step-icon {
  @apply w-10 h-10 rounded-full flex items-center justify-center;
  @apply bg-neutral-100 text-neutral-500;
}

.journey-step.completed .journey-step-icon {
  @apply bg-secondary-100 text-secondary-600;
}

.journey-step.active .journey-step-icon {
  @apply bg-primary-100 text-primary-600;
  box-shadow: 0 0 0 4px rgba(226, 107, 66, 0.15);
}

/* -----------------------------------------------------------------------------
 * Modals & Overlays
 * ----------------------------------------------------------------------------- */
.modal-overlay {
  @apply fixed inset-0 bg-neutral-950/40 backdrop-blur-sm z-50;
  @apply animate-fade-in;
}

.modal-content {
  @apply bg-surface-paper rounded-2xl shadow-dramatic;
  @apply animate-scale-in;
}

/* -----------------------------------------------------------------------------
 * Tooltips
 * ----------------------------------------------------------------------------- */
.tooltip {
  @apply absolute z-50 px-3 py-2 text-sm bg-neutral-900 text-white rounded-lg;
  @apply opacity-0 pointer-events-none transition-opacity duration-200;
  box-shadow: 0 4px 16px rgba(var(--shadow-color) / 0.2);
}

.tooltip.visible {
  @apply opacity-100 pointer-events-auto;
}

/* -----------------------------------------------------------------------------
 * Dividers
 * ----------------------------------------------------------------------------- */
.divider {
  @apply h-px bg-neutral-200 my-6;
}

.divider-vertical {
  @apply w-px bg-neutral-200 mx-4;
}

.divider-editorial {
  @apply flex items-center gap-4 my-8;
}

.divider-editorial::before,
.divider-editorial::after {
  content: '';
  @apply flex-1 h-px bg-neutral-200;
}

/* -----------------------------------------------------------------------------
 * Decorative Elements
 * ----------------------------------------------------------------------------- */
/* Noise texture overlay */
.noise-overlay {
  @apply fixed inset-0 pointer-events-none z-50;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity: 0.02;
  mix-blend-mode: multiply;
}

/* Warm ambient glow */
.ambient-glow {
  @apply fixed pointer-events-none;
  background: radial-gradient(ellipse at center, var(--primary-200) 0%, transparent 70%);
  opacity: 0.15;
  filter: blur(80px);
}

/* Editorial accent line */
.accent-line {
  @apply w-16 h-1 bg-primary-500 rounded-full;
}

.accent-line-vertical {
  @apply w-1 h-16 bg-primary-500 rounded-full;
}

/* -----------------------------------------------------------------------------
 * Utility Classes
 * ----------------------------------------------------------------------------- */
/* Text gradient */
.text-gradient-primary {
  @apply bg-clip-text text-transparent;
  background-image: linear-gradient(135deg, var(--primary-600) 0%, var(--primary-500) 100%);
}

.text-gradient-warm {
  @apply bg-clip-text text-transparent;
  background-image: linear-gradient(135deg, var(--primary-600) 0%, var(--accent-600) 100%);
}

/* Background patterns */
.bg-pattern-dots {
  background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='1' cy='1' r='1' fill='%23e5e4e2'/%3E%3C/svg%3E");
}

.bg-pattern-grid {
  background-image: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 40L40 0M0 0L40 40' stroke='%23e5e4e2' stroke-width='0.5' fill='none'/%3E%3C/svg%3E");
}

/* Hover lift effect */
.hover-lift {
  @apply transition-all duration-300 ease-out-expo;
}

.hover-lift:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 40px rgba(var(--shadow-color) / 0.1);
}

/* Focus ring */
.focus-ring {
  @apply focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2;
}

/* Truncate text */
.truncate-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.truncate-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Responsive container */
.container-editorial {
  @apply max-w-editorial mx-auto px-6 lg:px-8;
}

.container-editorial-wide {
  @apply max-w-editorial-wide mx-auto px-6 lg:px-8;
}

/* Aspect ratios */
.aspect-editorial {
  aspect-ratio: 3 / 4;
}

/* Animation delays for staggered reveals */
.delay-100 { animation-delay: 100ms; }
.delay-200 { animation-delay: 200ms; }
.delay-300 { animation-delay: 300ms; }
.delay-400 { animation-delay: 400ms; }
.delay-500 { animation-delay: 500ms; }
.delay-600 { animation-delay: 600ms; }
.delay-700 { animation-delay: 700ms; }
.delay-800 { animation-delay: 800ms; }

/* Fill mode for animations */
.fill-forwards {
  animation-fill-mode: forwards;
}

.fill-both {
  animation-fill-mode: both;
}
